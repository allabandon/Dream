mixed-port: 7890
external-controller: 0.0.0.0:9090
external-ui: ui
tcp-concurrent: true # TCP 并发连接所有 IP, 将使用最快握手的 TCP
allow-lan: false # 允许局域网连接
ipv6: false # 开启 IPv6 总开关，关闭阻断所有 IPv6 链接和屏蔽 DNS 请求 AAAA 记录
log-level: info # 日志等级 silent/error/warning/info/debug
tun:
  loopback-address:
    - 10.7.0.1
  enable: false
  device: Meta
  stack: mixed
  dns-hijack:
    - "any:53" #L115
  auto-detect-interface: true # 自动识别出口网卡
  auto-route: true # 配置路由表
  mtu: 9000 # 最大传输单元 或者 9000? https://matsuridayo.github.io/m-configuration/
  strict-route: false
dns:
  respect-rules: false
  cache-algorithm: arc
  enable: false # 关闭将使用系统 DNS
  prefer-h3: false # 开启 DoH 支持 HTTP/3，将并发尝试
  listen: :60053 # 开启 DNS 服务器监听
  ipv6: false
  # ipv6-timeout: 300 # 单位：ms，内部双栈并发时，向上游查询 AAAA 时，等待 AAAA 的时间，默认 100ms
  use-hosts: true # 查询 hosts

  enhanced-mode: fake-ip

  fake-ip-range: 28.0.0.1/8 # fake-ip 池设置

  # 可选 blacklist / whitelist，默认 blacklist，whitelist 即只有匹配成功才返回 fake-ip
  fake-ip-filter-mode: blacklist

  fake-ip-filter:
    [
      "geosite:private",
      "geosite:cn",
      "+.ifcfg.cn",
      "+.neu6.edu.cn",
      "+.ipw.cn",
      "+.3322.net",
      "+.108964.xyz",
      "+.xream.eu.org",
      "+.zhetengsha.eu.org",
      "+.argotunnel.com",
      "+.cftunnel.com",
      "+.ts.net",
      "+.tailscale.com",
      "+.market.xiaomi.com",
      "+.steamcontent.com",
      "+.ripe.net",
      "+.mlsao.eu.org",
      "WORKGROUP",
      "localhost",
      "*",
      "+.cn",
      "+.apple.com",
      "+.siri.apple.com",
      "+.local",
      "+.id.ui.direct",
      "+.lan",
      "+.msftconnecttest.com",
      "+.msftncsi.com",
      "+.srv.nintendo.net",
      "+.stun.playstation.net",
      "+.xboxlive.com",
      "+.logon.battlenet.com.cn",
      "+.logon.battle.net",
      "+.blzstatic.cn",
      "+.music.163.com",
      "+.126.net",
      "+.kuwo.cn",
      "+.y.qq.com",
      "+.xiami.com",
      "+.music.migu.cn",
      "+.mcdn.bilivideo.cn",
      "+.cmpassport.com",
      "+.jegotrip.com.cn",
      "+.icitymobile.mobi",
      "+.pingan.com.cn",
      "+.cmbchina.com",
      "+.pool.ntp.org",
      "+.ntp.org.cn",
      "+.10010.com",
      "+.chinaunicom.com",
      "+.baidu.com",
      "+.alipay.com",
      "+.alipayobjects.com",
      "+.dl.google.com",
      "+.jijifun.com",
      "+.msftnsci.com",
      "+.gstatic.com",
      "+.stun.*.*",
      "+.stun.*.*.*",
      "+.stun.*.*.*.*",
      "+.time.*",
      "+.time.*.*",
      "+.time.*.*.*",
      "+.ntp.*",
      "+.ntp.*.*",
      "+.ntp.*.*.*",
      "+.localdomain",
      "+.example",
      "+.invalid",
      "+.localhost",
      "+.test",
      "+.home.arpa",
      "+.battlenet.com.cn",
      "+.wotgame.cn",
      "+.wggames.cn",
      "+.wowsgame.cn",
      "+.wargaming.net",
      "+.linksys.com",
      "+.linksyssmartwifi.com",
      "+.router.asus.com",
      "+.nflxvideo.net",
      "+.square-enix.com",
      "+.finalfantasyxiv.com",
      "+.ffxiv.com",
      "+.time.edu.cn",
      "+.passenger.t3go.cn",
      "+.e.crashlytics.com",
      "+.captive.apple.com",
      "+.app.yinxiang.com",
      "+.injections.adguard.org",
      "+.local.adguard.org",
      "+.cable.auth.com",
      "+.www.baidu.com",
      "+.yunbusiness.ccb.com",
      "+.wxh.wo.cn",
      "+.gate.lagou.com",
      "+.www.abchina.com.cn",
      "+.network-test.debian.org",
      "+.detectportal.firefox.com",
      "+.resolver1.opendns.com",
      "+.stun.*",
      "+.global.turn.twilio.com",
      "+.global.stun.twilio.com",
      "+.musicapi.taihe.com",
      "+.music.taihe.com",
      "+.songsearch.kugou.com",
      "+.trackercdn.kugou.com",
      "+.api-jooxtt.sanook.com",
      "+.api.joox.com",
      "+.joox.com",
      "+.streamoc.music.tc.qq.com",
      "+.mobileoc.music.tc.qq.com",
      "+.isure.stream.qqmusic.qq.com",
      "+.dl.stream.qqmusic.qq.com",
      "+.aqqmusic.tc.qq.com",
      "+.amobile.music.tc.qq.com",
      "+.proxy.golang.org",
      "+.id6.me",
      "+.open.e.189.cn",
      "+.mdn.open.wo.cn",
      "+.opencloud.wostore.cn",
      "+.auth.wosms.cn",
      "+.PDC._msDCS.*.*",
      "+.DC._msDCS.*.*",
      "+.GC._msDCS.*.*",
      "+.ntp.*.com",
      "+.time.*.com",
      "+.ntp?.*.com",
      "+.time?.*.com",
      "+.time.*.gov",
      "+.time.*.edu.cn",
      "+.xbox.*.microsoft.com",
      "+.localhost.*.qq.com",
      "+.connect.rom.miui.com",
      "+.wifi.vivo.com.cn",
      "+.localhost.ptlogin2.qq.com",
      "+.time1.*.com",
      "+.time2.*.com",
      "+.time3.*.com",
      "+.time4.*.com",
      "+.time5.*.com",
      "+.time6.*.com",
      "+.time7.*.com",
      "+.ntp1.*.com",
      "+.ntp2.*.com",
      "+.ntp3.*.com",
      "+.ntp4.*.com",
      "+.ntp5.*.com",
      "+.ntp6.*.com",
      "+.ntp7.*.com",
      "+.time1.cloud.tencent.com",
      "+.localhost.sec.qq.com",
      "+.heartbeat.belkin.com",
      "+.mesu.apple.com",
      "+.swscan.apple.com",
      "+.swquery.apple.com",
      "+.swdownload.apple.com",
      "+.swcdn.apple.com",
      "+.swdist.apple.com",
      "+.lens.l.google.com",
      "+.stun.l.google.com",
      "+.time.*.apple.com",
      "+.amobile.music.tc.qq.co",
      "+.xnotify.xboxlive.com",
    ]

  # 用于解析 nameserver，fallback 以及其他DNS服务器配置的，DNS 服务域名
  # 只能使用纯 IP 地址，可使用加密 DNS
  default-nameserver:
    ["180.76.76.76", "52.80.52.52", "119.28.28.28", "223.6.6.6"]
  nameserver:
    [
      "https://doh.pub/dns-query",
      "https://dns.alidns.com/dns-query",
      "https://doh-pure.onedns.net/dns-query",
    ]
proxy-groups:
  - name: "PROXY"
    type: url-test
    url: https://8.8.4.4
    tolerance: 50
    lazy: true
    interval: 60
    timeout: 2000
    use:
      - own
proxy-providers:
  own:
    url: "https://git.repcz.link/https://gist.githubusercontent.com/xxxx/yyyyyyyyyyyy/raw/own"
    type: "http"
    lazy: true
    interval: 3600
rules:
  - DOMAIN-SUFFIX,git.repcz.link,DIRECT
  - MATCH,PROXY
